describe("Ext.GlobalEvents",function(){describe("idle event",function(){var D=Ext.isIE?50:10,C,B;function A(){C=true}beforeEach(function(){C=false;B=false;Ext.on("idle",A)});afterEach(function(){Ext.un("idle",A)});it("should fire after DOM event handler are invoked, but before control is returned to the browser",function(){var G=Ext.getBody().createChild(),F=0;function E(){expect(C).toBe(false);F++}G.on("click",E);G.on("click",function(){E()});jasmine.fireMouseEvent(G,"click");expect(F).toBe(2);expect(C).toBe(true);G.destroy()});it("should fire after a JsonPProxy processes a return packet",function(){var E=Ext.create("Ext.data.Store",{proxy:{type:"jsonp",reader:{rootProperty:"topics",totalProperty:"totalCount"},url:"http://www.sencha.com/forum/remote_topics/index.php"},fields:["title"],listeners:{load:function(){B=true}}});E.loadPage(1);waitsFor(function(){return B===true});runs(function(){waits(D);runs(function(){expect(C).toBe(true);E.destroy()})})});it("should fire after a JsonP request is processed",function(){Ext.data.JsonP.request({url:"http://www.sencha.com/forum/remote_topics/index.php?page=1&start=0&limit=100",callback:function(){B=true}});waitsFor(function(){return B===true});runs(function(){waits(D);runs(function(){expect(C).toBe(true)})})});it("should fire after an Ajax request is processed",function(){Ext.Ajax.request({url:"foo",callback:function(){B=true}});waitsFor(function(){return B===true});runs(function(){waits(D);runs(function(){expect(C).toBe(true)})})});it("should fire after a scheduled Task is run",function(){Ext.TaskManager.newTask({run:function(){B=true},repeat:1,interval:1}).start();waitsFor(function(){return B===true});runs(function(){waits(D);runs(function(){expect(C).toBe(true)})})})})});