xdescribe("Ext.core.DomHelper",function(){var A={dom:{cleanBody:function(){document.getElementsByTagName("body")[0].innerHTML=""},parentNodeName:{"*":"div",frame:"frameset",col:"colgroup",colgroup:"table",option:"select",optgroup:"select",tbody:"table",thead:"table",tfoot:"table",tr:"tbody",td:"tr"},voidNode:{area:true,br:true,col:true,frame:true,hr:true,img:true,input:true,link:true,meta:true,param:true,range:true,spacer:true,wbr:true}},String:{html:function(C,D){var E="<"+C+" class="+D+">";if(!A.dom.voidNode[C]){E+="</"+C+">"}return E}}};xdescribe("useDom = false",function(){beforeEach(function(){Ext.core.DomHelper.useDom=false})});xdescribe("useDom = true",function(){beforeEach(function(){Ext.core.DomHelper.useDom=false});afterEach(function(){Ext.core.DomHelper.useDom=true})});function B(){var C=Ext.core.DomHelper,D,E;beforeEach(function(){D=Ext.getBody().createChild({id:"DomHelperHelper",children:[{cls:"child",id:"firstChild"},{cls:"child"},{cls:"child"},{cls:"child"},{cls:"child"},{cls:"child2"},{cls:"child2"},{cls:"child"},{cls:"child"},{cls:"child"}]});E=Ext.select("#DomHelperHelper > div")});afterEach(A.dom.cleanBody);describe("markup",function(){it("should return the markup for a string",function(){var F='<div class="class">my div!</div>';expect(C.markup(F)).toEqual(F)});it("should return the markup for an object",function(){var G='<div class="class"><span style="padding:10px;">test</span><br/></div>',F={cls:"class",children:[{tag:"span",html:"test",style:{padding:"10px"}},{tag:"br"}]};expect(C.markup(F)).toEqual(G)})});describe("applyStyles",function(){it("should apply styles from a string",function(){C.applyStyles(D,"padding:10px;");expect(D.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});it("should apply styles from an object",function(){C.applyStyles(D,{padding:"10px"});expect(D.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});xit("should apply styles from an object using numbers",function(){C.applyStyles(D,{padding:10});expect(D.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)});it("should apply styles from a function",function(){C.applyStyles(D,function(){return{padding:"10px"}});expect(D.dom.style.padding).toMatch(/^(?:10px|10px 10px 10px 10px)$/)})});describe("generateStyles",function(){it("should un-camel case names",function(){expect(C.generateStyles({backgroundColor:"red"})).toEqual("background-color:red;")});it("should concat multiple values",function(){expect(C.generateStyles({backgroundColor:"red",color:"green","font-size":"12px"})).toEqual("background-color:red;color:green;font-size:12px;")});it("should use a passed buffer",function(){var F=[];C.generateStyles({color:"red"},F);expect(F.join("")).toEqual("color:red;")});it("should not html encode by default",function(){expect(C.generateStyles({fontFamily:'"Arial"'})).toEqual('font-family:"Arial";')});it("should encode html entity values",function(){expect(C.generateStyles({fontFamily:'"Arial"'},null,true)).toEqual("font-family:&quot;Arial&quot;;")})});describe("insertHtml",function(){var G,F='<div id="newChild"></div>';describe("basic",function(){beforeEach(function(){G=Ext.getDom(E.first());expect(Ext.get("newChild")).toBeNull()});afterEach(function(){var H=document.getElementById("newChild");expect(H).toBeDefined();G.innerHTML=""});it("should insert a new element beforeBegin",function(){C.insertHtml("beforeBegin",G,F)});it("should insert a new element afterBegin",function(){C.insertHtml("afterBegin",G,F)});it("should insert a new element beforeEnd",function(){C.insertHtml("beforeEnd",G,F)});it("should insert a new element afterEnd",function(){C.insertHtml("afterEnd",G,F)});describe("textNode",function(){var J=0,I,H;beforeEach(function(){H=document.createTextNode(I="howdy"+(J++));G.appendChild(H);expect(G.firstChild).toEqual(H);expect(G.firstChild.nodeValue).toEqual(I)});afterEach(function(){expect(G.childNodes.length).toEqual(2);G.removeChild(H);expect(G.childNodes.length).toEqual(1);H=null;G.innerHTML="";expect(G.childNodes.length).toEqual(0)});it("should insert a new element beforeBegin",function(){C.insertHtml("beforeBegin",H,F)});it("should insert a new element afterBegin",function(){C.insertHtml("afterBegin",H,F)});it("should insert a new element beforeEnd",function(){C.insertHtml("beforeEnd",H,F)});it("should insert a new element afterEnd",function(){C.insertHtml("afterEnd",H,F)})})});describe("details",function(){var J={afterEnd:true,beforeBegin:true},L={afterBegin:true,beforeEnd:true},M={afterEnd:true,beforeBegin:true,afterBegin:true,beforeEnd:true};for(var H in A.dom.voidNode){N(J,H,H)}N(M,"div","div");N(M,"a","p");N(M,"a","a");N(L,"tr","td");N(J,"tr","tr");N(L,"tbody","tr");N(L,"tfoot","tr");N(L,"thead","tr");N(J,"tbody","tbody");N(J,"tbody","thead");N(J,"tbody","tfoot");N(J,"tfoot","tbody");N(J,"tfoot","thead");N(J,"tfoot","tfoot");N(J,"thead","tbody");N(J,"thead","thead");N(J,"thead","tfoot");function N(Q,O,P){if(Q.afterBegin){K("afterBegin",O,P)}if(Q.beforeEnd){K("beforeEnd",O,P)}if(Q.afterEnd){I("afterEnd",O,P)}if(Q.beforeBegin){I("beforeBegin",O,P)}if(Q.afterBegin||Q.beforeEnd){it(["should overwrite the HTML","of a",O.toUpperCase(),"Element"].join(" "),function(){var R=A.String.html(P,"overwrite");var S=document.createElement(O);expect(S.parentNode).toBeNull();expect(S.childNodes.length).toBe(0);expect(S.firstChild).toBeNull();C.overwrite(S,R);expect(S.childNodes.length).toBe(1);expect(S.firstChild).toBeDefined();expect(S.firstChild.className).toBe("overwrite")});if(Ext.core.Element.prototype.setHTML){it(["should set the HTML","of a",O.toUpperCase(),"Element"].join(" "),function(){var R=A.String.html(P,"overwrite");var S=document.createElement(O);expect(S.parentNode).toBeNull();expect(S.childNodes.length).toBe(0);expect(S.firstChild).toBeNull();Ext.fly(S).setHTML(R);expect(S.childNodes.length).toBe(1);expect(S.firstChild).toBeDefined();expect(S.firstChild.className).toBe("overwrite")})}}}function K(Q,O,P){it(["should insertHtml",P.toUpperCase(),Q,"of a "+O.toUpperCase()+" Element","when it has no parentNode"].join(" "),function(){var R=A.String.html(P,Q);var S=document.createElement(O);expect(S.parentNode).toBeNull();expect(S.childNodes.length).toBe(0);expect(S.firstChild).toBeNull();C.insertHtml(Q,S,R);expect(S.childNodes.length).toBe(1);expect(S.firstChild).toBeDefined();expect(S.firstChild.className).toBe(Q)})}function I(Q,O,P){it(["should insertHtml",P.toUpperCase(),Q,"of a "+O.toUpperCase()+" Element"].join(" "),function(){var R=A.String.html(P,Q);var T=document.createElement(O);document.createElement(A.dom.parentNodeName[O]||A.dom.parentNodeName["*"]).appendChild(T);var S=T.parentNode;expect(S).toBeDefined();expect(T.childNodes.length).toBe(0);expect(T.firstChild).toBeNull();expect(S.childNodes.length).toBe(1);C.insertHtml(Q,T,R);S.removeChild(T);expect(S.childNodes.length).toBe(1);expect(S.firstChild.tagName.toLowerCase()).toBe(P);expect(S.firstChild.className).toBe(Q)})}})});describe("overwrite",function(){it("should overwrite the el",function(){var F=Ext.getDom(E.first());expect(F.innerHTML).toEqual("");C.overwrite(F,{tag:"span",html:"hello"});expect(F.innerHTML.toLowerCase()).toEqual("<span>hello</span>")});describe("table innerHTML bug",function(){it("should set the html of a tr Element, even when it has no parentNode",function(){var F=document.createElement("tr");expect(F.parentNode).toEqual(null);expect(F.childNodes.length).toEqual(0);C.overwrite(F,"<td>cell1");expect(F.childNodes.length).toEqual(1);expect(F.lastChild.innerHTML).toEqual("cell1");C.overwrite(F,"<td>cell2");expect(F.childNodes.length).toEqual(1);expect(F.lastChild.innerHTML).toEqual("cell2")});it("should set the html of an Element",function(){var F='<a href="http://mootools.net/">Link</a>';var G=document.createElement("div");C.overwrite(G,F);expect(G.innerHTML.toLowerCase()).toEqual(F.toLowerCase())});it("should set the html of an Element with multiple arguments",function(){var F=["<p>Paragraph</p>",'<a href="http://mootools.net/">Link</a>'];var G=document.createElement("div");C.overwrite(G,F);expect(G.innerHTML.toLowerCase()).toEqual(F.join("").toLowerCase())});it("should set the html of a select Element",function(){var F='<option>option 1</option><option selected="selected">option 2</option>';var G=document.createElement("select");C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.options.length).toEqual(2);expect(G.selectedIndex).toEqual(1)});it("should set the html of a table Element",function(){var F='<tbody><tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr></tbody>';var G=document.createElement("table");C.overwrite(G,F);expect(G.childNodes.length).toEqual(1);expect(G.firstChild.firstChild.childNodes.length).toEqual(2);expect(G.firstChild.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tbody Element",function(){var F='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var G=document.createElement("tbody");document.createElement("table").appendChild(G);C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a thead Element",function(){var F='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var G=document.createElement("thead");document.createElement("table").appendChild(G);C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tfoot Element",function(){var F='<tr><td>cell 1</td><td>cell 2</td></tr><tr><td class="cell">cell 1</td><td>cell 2</td></tr>';var G=document.createElement("tfoot");document.createElement("table").appendChild(G);C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.lastChild.firstChild.className).toEqual("cell")});it("should set the html of a tr Element",function(){var F='<td class="cell">cell 1</td><td>cell 2</td>';var G=document.createElement("tr");document.createElement("tbody").appendChild(G);document.createElement("table").appendChild(G.parentNode);C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.firstChild.className).toEqual("cell")});it("should set the html of a td Element",function(){var F='<span class="span">Some Span</span><a href="#">Some Link</a>';var G=document.createElement("td");document.createElement("tr").appendChild(G);document.createElement("tbody").appendChild(G.parentNode);document.createElement("table").appendChild(G.parentNode.parentNode);C.overwrite(G,F);expect(G.childNodes.length).toEqual(2);expect(G.firstChild.className).toEqual("span")})})})}});