((Ext.isIE8||Ext.isFirefox)?xdescribe:describe)("Ext.event.gesture.DoubleTap",function(){var L=Ext.testHelper,I=Ext.event.Dispatcher.getInstance().getPublisher("gesture").getRecognizers().doubleTap,J=I.getMoveDistance(),E=I.getTapDistance(),G=60,H,M,N,K,A;function D(O){L.touchStart(M,O)}function C(O){L.touchMove(M,O)}function F(O){L.touchEnd(M,O)}function B(O){L.touchCancel(M,O)}beforeEach(function(){H=I.getMaxDuration();I.setMaxDuration(G);M=Ext.getBody().createChild({});N=jasmine.createSpy();K=jasmine.createSpy();N.andCallFake(function(O){A=O});K.andCallFake(function(O){A=O});M.on("doubletap",K);M.on("singletap",N)});afterEach(function(){I.setMaxDuration(H);M.destroy()});it("should fire doubletap and not singletap when a second tap occurs within maxDuration",function(){runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waits(G-30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(K).toHaveBeenCalled();expect(N).not.toHaveBeenCalled();expect(A.type).toBe("doubletap")})});it("should fire singletap and not doubletap when a second tap does not occur within maxDuration",function(){runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waits(G+30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(K).not.toHaveBeenCalled();expect(N).toHaveBeenCalled();expect(A.type).toBe("singletap")})});it("should not fire singletap if movement of the first pointer exceeds moveDistance",function(){runs(function(){D({id:1,x:10,y:10});C({id:1,x:10,y:10+J});F({id:1,x:10,y:10+J})});waits(G+30);runs(function(){expect(N).not.toHaveBeenCalled()})});it("should not fire doubletap if movement of the first pointer exceeds moveDistance",function(){runs(function(){D({id:1,x:10,y:10});C({id:1,x:10,y:10+J});F({id:1,x:10,y:10+J})});waits(G-30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(K).not.toHaveBeenCalled()});waits(G+30);runs(function(){expect(N).toHaveBeenCalled()})});it("should fire singletap if movement of the first pointer is within moveDistance",function(){runs(function(){D({id:1,x:10,y:10});C({id:1,x:10,y:9+J});F({id:1,x:10,y:9+J})});waits(G+30);runs(function(){expect(N).toHaveBeenCalled()})});it("should fire doubletap if movement of the first pointer is within moveDistance",function(){runs(function(){D({id:1,x:10,y:10});C({id:1,x:9+J,y:10});F({id:1,x:9+J,y:10})});waits(G-30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:11,y:11})});waitsForAnimation();runs(function(){expect(K).toHaveBeenCalled()})});it("should fire double tap if the second tap is within tapDistance from the first tap",function(){runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waits(G-30);runs(function(){D({id:1,x:10+E,y:10});F({id:1,x:10+E,y:10})});waitsForAnimation();runs(function(){expect(K).toHaveBeenCalled()})});it("should not fire double tap if the second tap exceeds tapDistance from the first tap",function(){runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waits(G-30);runs(function(){D({id:1,x:11+E,y:10});F({id:1,x:11+E,y:10})});waitsForAnimation();runs(function(){expect(K).not.toHaveBeenCalled()})});if(Ext.supports.Touch){it("should not fire single tap if the first touch is canceled",function(){runs(function(){D({id:1,x:10,y:10});B({id:1,x:10,y:10})});waits(G+30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(N).not.toHaveBeenCalled()})});it("should not fire double tap if the first touch is canceled",function(){runs(function(){D({id:1,x:10,y:10});B({id:1,x:10,y:10})});waits(G-30);runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(K).not.toHaveBeenCalled()})});it("should not fire double tap if the second touch is canceled",function(){runs(function(){D({id:1,x:10,y:10});F({id:1,x:10,y:10})});waits(G-30);runs(function(){D({id:1,x:10,y:10});B({id:1,x:10,y:10})});waitsForAnimation();runs(function(){expect(K).not.toHaveBeenCalled()})})}});