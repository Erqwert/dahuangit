xdescribe("Ext.Loader",function(){var A=Ext.Loader,B=Ext.app;it("should set single namespace with setPath call",function(){A.setPath("ExtLoaderTestNamespace1","/foo1");expect(ExtLoaderTestNamespace1.foo.Bar).not.toBeUndefined();expect(ns).toBe("ExtLoaderTestNamespace1")});it("should set multiple namespaces with setPath call",function(){A.setPath({ExtLoaderTestNamespace2:"/foo2",ExtLoaderTestNamespace3:"/foo3"});var C=B.getNamespace("ExtLoaderTestNamespace2.foo.Bar"),D=B.getNamespace("ExtLoaderTestNamespace3.foo.Bar");expect(C).toBe("ExtLoaderTestNamespace2");expect(D).toBe("ExtLoaderTestNamespace3")});it("should set namespaces with setConfig object",function(){A.setConfig({paths:{ExtLoaderTestNamespace4:"/foo4"}});var C=B.getNamespace("ExtLoaderTestNamespace4.foo.Bar");expect(C).toBe("ExtLoaderTestNamespace4")});it("should set namespaces with setConfig name/value pair",function(){A.setConfig("paths",{ExtLoaderTestNamespace5:"/foo5"});var C=B.getNamespace("ExtLoaderTestNamespace5.foo.Bar");expect(C).toBe("ExtLoaderTestNamespace5")});it("should allow nested namespaces 1",function(){A.setPath({"ExtLoaderTestNamespace1.foo":"/foobar1"});var C=B.getNamespace("ExtLoaderTestNamespace1.foo.Bar");expect(C).toBe("ExtLoaderTestNamespace1.foo")});it("should allow nested namespaces 2",function(){A.setPath({"ExtLoaderTestNamespace1.foo.Bar":"/foobaroo1"});var C=B.getNamespace("ExtLoaderTestNamespace1.foo.Bar.Baz");expect(C).toBe("ExtLoaderTestNamespace1.foo.Bar")});it("should clean up namespaces (not a test)",function(){var C=A.config.paths;delete C.ExtLoaderTestNamespace1;delete C.ExtLoaderTestNamespace2;delete C.ExtLoaderTestNamespace3;delete C.ExtLoaderTestNamespace4;delete C.ExtLoaderTestNamespace5;B.clearNamespaces()});describe("duplicate namespaces",function(){var D=false,C=false;beforeEach(function(){var E=function(){};E.prototype=Ext;Foo=new E();A.setPath("Foo.spec","resources/spec");A.setPath("Ext.spec","resources/spec");spyOn(A,"loadScriptFile").andCallThrough();Ext.require("Foo.spec.LoaderTest",function(){D=true});Ext.require("Ext.spec.LoaderTest",function(){C=true});waits(20)});afterEach(function(){D=C=false;Foo=null});it("should not load the same file twice",function(){expect(A.loadScriptFile.callCount).toBe(1)});it("should still call each require's callback regardless of duplication",function(){expect(D).toBe(true);expect(C).toBe(true)});it("should not have a non-zero file counter",function(){expect(A.numPendingFiles).toBe(0)})});describe("creating the loadScript src",function(){it("should append the cache-busting query param to the querystring in case there is already a querystring",function(){var C;Ext.Loader.injectScriptElement=function(E,D,F){C=E};Ext.Loader.loadScript({url:"script.js?key=value"});expect(C.indexOf("?key=value&")>-1).toBe(true)})})});