var MockAjaxManager={getXhrInstance:null,addMethods:function(){var B=Ext.data.Connection,A=B.prototype;B.requestId=0;MockAjaxManager.getXhrInstance=A.getXhrInstance;A.getXhrInstance=function(){return new MockAjax()};A.mockComplete=function(C,D){this.mockGetRequestXHR(D).xhr.complete(C)};A.mockGetRequestXHR=function(D){var C;if(D){C=this.requests[D]}else{C=this.mockGetAllRequests()[0]}return C?C:null};A.mockGetAllRequests=function(){var C=this.requests,F,D,E=[];for(F in C){if(C.hasOwnProperty(F)){E.push(C[F])}}return E};this.originalExtAjax=Ext.Ajax;Ext.Ajax=new B({autoAbort:false})},removeMethods:function(){var A=Ext.data.Connection.prototype;delete A.mockComplete;delete A.mockGetRequestXHR;A.getXhrInstance=MockAjaxManager.getXhrInstance;Ext.Ajax=this.originalExtAjax}};var MockAjax=function(){this.headers={};this.ajaxOptions={};this.readyState=0;this.status=null;this.responseText=this.responseXML=null};MockAjax.prototype.syncDefaults={responseText:"data",status:200,statusText:"",responseXML:null,responseHeaders:{"Content-type":"application/json"}};MockAjax.prototype.readyChange=function(){if(this.onreadystatechange){this.onreadystatechange()}};MockAjax.prototype.open=function(E,C,F,B,A){var D=this.ajaxOptions;D.method=E;D.url=C;D.async=F;D.username=B;D.password=A;this.readyState=1;this.readyChange()};MockAjax.prototype.send=function(A){this.ajaxOptions.data=A;this.readyState=2;if(!this.ajaxOptions.async){this.complete(this.syncDefaults)}else{this.readyChange()}};MockAjax.prototype.abort=function(){this.readyState=0;this.readyChange()};MockAjax.prototype.setRequestHeader=function(A,B){this.headers[A]=B};MockAjax.prototype.getAllResponseHeaders=function(){return""};MockAjax.prototype.getResponseHeader=function(A){return this.headers[header]};MockAjax.prototype.onreadystatechange=function(){};MockAjax.prototype.complete=function(A){this.responseText=A.responseText||"";this.status=A.status;this.statusText=A.statusText;this.responseXML=A.responseXML||this.xmlDOM(A.responseText);this.responseHeaders=A.responseHeaders||{"Content-type":A.contentType||"application/json"};this.readyState=4;this.readyChange()};MockAjax.prototype.xmlDOM=function(B){if(!window.DOMParser&&window.ActiveXObject){doc=new ActiveXObject("Microsoft.XMLDOM");doc.async="false";DOMParser=function(){};DOMParser.prototype.parseFromString=function(C){var D=new ActiveXObject("Microsoft.XMLDOM");D.async="false";D.loadXML(C);return D}}try{return(new DOMParser()).parseFromString(B,"text/xml")}catch(A){return null}};