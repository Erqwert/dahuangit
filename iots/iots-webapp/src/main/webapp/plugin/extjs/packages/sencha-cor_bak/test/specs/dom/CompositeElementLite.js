describe("Ext.CompositeElementLite",function(){var I,J,L,M=6,F=5,H=4,E=5,A=4,C=2,D=2,G=3,B=2,K=function(N){return document.getElementById(N)};beforeEach(function(){I=Ext.getBody().createChild({id:"mainRoot"});I.dom.innerHTML=['<div class="foo toFilter" id="a">','<div class="child1">c1</div>','<div class="child2">c2</div>','<div class="child1">c3</div>','<div class="child2">c4</div>',"</div>",'<div class="bar" id="b"></div>','<div class="baz" id="c"></div>','<div class="foo" id="d"></div>','<div class="bar" id="e"></div>','<div class="baz" id="f"></div>','<div class="foo toFilter" id="g"></div>','<div class="bar" id="h"></div>','<div class="baz" id="i"></div>','<div class="foo" id="j"></div>','<div class="bar" id="k"></div>','<div class="baz" id="l"></div>','<div class="foo" id="m"></div>','<div class="bar" id="n"></div>','<div class="foo" id="o"></div>','<div class="child1" id="p"></div>','<div class="child2" id="q"></div>','<div class="child1" id="r"></div>','<div class="child2" id="s"></div>','<div class="child1" id="t"></div>'].join("");L=function(N){J=new Ext.CompositeElementLite(N)}});afterEach(function(){I.destroy();L=I=J=null});describe("constructor",function(){});describe("add",function(){it("should accept a selector",function(){L();J.add(".foo");expect(J.getCount()).toBe(M)});it("should accept a selector with a root",function(){L();J.add(".child1","a");expect(J.getCount()).toBe(C)});it("should accept another CompositeElement",function(){var N=new Ext.CompositeElementLite();N.add(K("a"));N.add(K("b"));N.add(K("c"));L();J.add(N);expect(J.getCount()).toBe(3)});it("should accept an array of elements",function(){L();J.add([K("a"),K("b")]);expect(J.getCount()).toBe(2)});it("should accept a NodeList",function(){L();J.add(K("a").getElementsByTagName("div"));expect(J.getCount()).toBe(4)});it("should accept a single element",function(){L();J.add(K("a"));expect(J.getCount()).toBe(1)});it("should accept a null argument",function(){L();expect(J.add(null)).toBe(J)});it("should return the CompositeElement",function(){L();expect(J.add(".foo")).toBe(J)})});describe("item",function(){it("should return null if there are no items",function(){L();expect(J.item(0)).toBeNull()});it("should return null if an item at that index does not exist",function(){L(".foo");expect(J.item(M)).toBeNull()});it("should return the item at the specified index",function(){L(".foo");expect(J.item(2).dom.id).toBe("g")});describe("first",function(){it("should return null when there are no items",function(){L();expect(J.first()).toBeNull()});it("should return the first item",function(){L(".foo");expect(J.first().dom.id).toBe("a")})});describe("last",function(){it("should return null when there are no items",function(){L();expect(J.last()).toBeNull()});it("should return the last item",function(){L(".foo");expect(J.last().dom.id).toBe("o")})})});describe("each",function(){it("should never iterate if there are no items",function(){var N=0;L();J.each(function(){++N});expect(N).toBe(0)});it("should iterate over each item",function(){var N=0;L(".baz");J.each(function(){++N});expect(N).toBe(H)});it("should default the scope to the element",function(){var N;L(K("a"));J.each(function(O){N=(O==this)});expect(N).toBe(true)});it("should use a specified scope",function(){var N={},O;L(".foo");J.each(function(){O=this},N);expect(O).toBe(N)});it("should pass the element, the ce & the index",function(){var N;L(K("a"));J.each(function(O,P,Q){N=[O.dom.id,P,Q]});expect(N).toEqual(["a",J,0])});it("should exit upon returning false",function(){var N=0;L(".foo");J.each(function(O){if(O.dom.id=="d"){return false}++N});expect(N).toBe(1)});it("should return the CompositeElement",function(){L();expect(J.each(function(){})).toBe(J)})});describe("fill",function(){it("should clear any existing elements",function(){L(".foo");J.fill(null);expect(J.getCount()).toBe(0)});it("should accept a selector",function(){L(".foo");expect(J.getCount()).toBe(M);J.fill(".bar");expect(J.getCount()).toBe(F)});it("should accept an array of elements",function(){L();J.fill([K("a"),K("b")]);expect(J.getCount()).toBe(2)});it("should accept a NodeList",function(){L();J.fill(K("a").getElementsByTagName("div"));expect(J.getCount()).toBe(4)});it("should accept another CompositeElement",function(){var N=new Ext.CompositeElementLite();N.add(K("a"));N.add(K("b"));N.add(K("c"));L();J.fill(N);expect(J.getCount()).toBe(3)});it("should return the CompositeElement",function(){L();expect(J.fill(null)).toBe(J)})});describe("filter",function(){it("should accept a selector",function(){L(".foo");expect(J.getCount()).toBe(M);expect(J.filter(".toFilter").getCount()).toBe(2)});it("should return the CompositeElement",function(){L();expect(J.filter(function(){})).toBe(J)});it("should accept a function",function(){L(".foo");J.filter(function(N){var O=N.dom.id;return O=="a"||O=="d"||O=="g"});expect(J.getCount()).toBe(3)});it("should set the scope to the element",function(){var N;L(K("a"));J.filter(function(){N=this.dom.id});expect(N).toBe("a")});it("should pass the element, the CompositeElement & the index",function(){var N;L(K("a"));J.filter(function(O,Q,P){N=[O.dom.id,Q,P]});expect(N).toEqual(["a",J,0])})});describe("indexOf",function(){it("should return -1 when there are no items",function(){L();expect(J.indexOf("a")).toBe(-1)});it("should return -1 when the item doesn't exist in the collection",function(){L(".bar");expect(J.indexOf("a")).toBe(-1)});it("should accept an id",function(){L(".foo");expect(J.indexOf("a")).toBe(0)});it("should accept an HTMLElement",function(){L(".foo");expect(J.indexOf(K("d"))).toBe(1)});it("should accept an Ext.dom.Element",function(){L(".foo");expect(J.indexOf(Ext.fly("g"))).toBe(2)})});describe("contains",function(){it("should return false when there are no items",function(){L();expect(J.contains("a")).toBe(false)});it("should return false when the item doesn't exist in the collection",function(){L(".bar");expect(J.contains("a")).toBe(false)});it("should accept an id",function(){L(".foo");expect(J.contains("a")).toBe(true)});it("should accept an HTMLElement",function(){L(".foo");expect(J.contains(K("d"))).toBe(true)});it("should accept an Ext.dom.Element",function(){L(".foo");expect(J.contains(Ext.fly("g"))).toBe(true)})});describe("removeElement",function(){it("should accept a string id",function(){L(".foo");J.removeElement("a");expect(J.contains("a")).toBe(false)});it("should accept an HTMLElement",function(){L(".foo");J.removeElement(K("a"));expect(J.contains("a")).toBe(false)});it("should accept an Ext.dom.Element",function(){L(".foo");J.removeElement(Ext.fly("a"));expect(J.contains("a")).toBe(false)});it("should accept an index",function(){L(".foo");J.removeElement(0);expect(J.contains("a")).toBe(false)});it("should remove the element if removeDom is specified",function(){L(".foo");J.removeElement("a",true);J.fill(".foo");expect(J.contains("a")).toBe(false)});it("should return the CompositeElement",function(){L();expect(J.removeElement(null)).toBe(J)})});describe("clear",function(){it("should do nothing when the collection is empty",function(){L();J.clear();expect(J.getCount()).toBe(0)});it("should remove all elements",function(){L(".foo");J.clear();expect(J.getCount()).toBe(0)})})});