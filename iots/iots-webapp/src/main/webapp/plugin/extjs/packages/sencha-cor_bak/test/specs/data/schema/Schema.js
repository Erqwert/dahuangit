describe("Ext.data.schema.Schema",function(){var A=Ext.data.Model,B;beforeEach(function(){B=Ext.data.Model.schema});afterEach(function(){B=Ext.data.Model.schema;B.clear(true);B=null});describe("entity names",function(){function C(D){return{$className:D}}describe("without namespace",function(){it("should return null if there is no className",function(){expect(B.getEntityName(C())).toBeNull()});it("should return a simple name",function(){expect(B.getEntityName(C("User"))).toBe("User")});it("should return the full classname",function(){expect(B.getEntityName(C("Foo.bar.baz.User"))).toBe("Foo.bar.baz.User")})});describe("with namespace",function(){it("should return null if there is no className",function(){B.setNamespace("spec.model");expect(B.getEntityName(C())).toBeNull()});it("should return the model name sans the namespace",function(){B.setNamespace("spec.model");expect(B.getEntityName(C("spec.model.User"))).toBe("User")});it("should return the other parts of model name sans the namespace",function(){B.setNamespace("spec.model");expect(B.getEntityName(C("spec.model.trading.Bid"))).toBe("trading.Bid")});it("should support putting the . at the end of the namespace",function(){B.setNamespace("spec.model.");expect(B.getEntityName(C("spec.model.User"))).toBe("User")});it("should not remove an unrelated namespace",function(){B.setNamespace("spec.model.");expect(B.getEntityName(C("spec.wodel.User"))).toBe("spec.wodel.User")})})});describe("legacy associations",function(){describe("inherited associations",function(){beforeEach(function(){B.setNamespace("spec");Ext.define("spec.AssociatedModel",{extend:"Ext.data.Model"});Ext.define("spec.ParentModel",{extend:"Ext.data.Model",associations:[{type:"hasOne",model:"spec.AssociatedModel",getterName:"getAssocModel",setterName:"setAssocModel",name:"associatedModel",associationKey:"associatedModel",foreignKey:"id"}]});Ext.define("spec.ChildModel",{extend:"spec.ParentModel"})});afterEach(function(){Ext.undefine("spec.AssociatedModel");Ext.undefine("spec.ParentModel");Ext.undefine("spec.ChildModel")});it("should convert the association",function(){var C=spec.ParentModel.associations.associatedModel;expect(!C).toBe(false);expect(typeof spec.ParentModel.prototype.getAssocModel).toBe("function");expect(typeof spec.ParentModel.prototype.setAssocModel).toBe("function");expect(C.cls.$className).toBe("spec.AssociatedModel");expect(C.inverse.cls.$className).toBe("spec.ParentModel")});it("should decorate AssociatedModel with ParentModel association",function(){var C=spec.AssociatedModel.associations.parentModel;expect(!C).toBe(false);expect(C.cls.$className).toBe("spec.ParentModel");expect(C.inverse.cls.$className).toBe("spec.AssociatedModel")});xit("should inherit the association",function(){var C=spec.ChildModel.associations.associatedModel;expect(!C).toBe(false);expect(C.cls.$className).toBe("spec.AssociatedModel");expect(C.inverse.cls.$className).toBe("spec.ChildModel")});xit("should decorate AssociatedModel with ChildModel association",function(){var C=spec.AssociatedModel.associations.childModel;expect(!C).toBe(false);expect(C.cls.$className).toBe("spec.ChildModel");expect(C.inverse.cls.$className).toBe("spec.AssociatedModel")})})})});