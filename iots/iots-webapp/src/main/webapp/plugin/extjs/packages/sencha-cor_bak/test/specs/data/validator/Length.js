describe("Ext.data.validator.Length",function(){var B;function A(E,D,F){B=new Ext.data.validator.Length({min:D,max:F});return B.validate(E)}function C(){return Ext.String.format.apply(Ext.String,arguments)}afterEach(function(){B=null});describe("invalid values",function(){it("should not validate undefined",function(){expect(A(undefined)).toBe(B.getEmptyMessage())});it("should not validate null",function(){expect(A(null)).toBe(B.getEmptyMessage())});describe("min only",function(){it("should not validate if the value is less than the minimum",function(){var D=5;expect(A("Foo",D)).toBe(C(B.getMinOnlyMessage(),D))})});describe("max only",function(){it("should not validate if the value is greater than the maximum",function(){var D=3;expect(A("LongValue",undefined,D)).toBe(C(B.getMaxOnlyMessage(),D))})});describe("min & max",function(){var D=5,E=10;it("should not validate if the value is less than the minimum",function(){expect(A("Foo",D,E)).toBe(C(B.getBothMessage(),D,E))});it("should not validate if the value is greater than the maximum",function(){expect(A("ReallyLongValue",D,E)).toBe(C(B.getBothMessage(),D,E))})})});describe("valid values",function(){describe("min only",function(){it("should validate if the value is equal to the minimum",function(){expect(A("Foo",3)).toBe(true)});it("should validate if the value is greater than the minimum",function(){expect(A("FooBar",5)).toBe(true)})});describe("max only",function(){it("should validate if the value is equal to the maximum",function(){expect(A("Foo",undefined,3)).toBe(true)});it("should validate if the value is less than the maximum",function(){expect(A("FooBar",undefined,7)).toBe(true)})});describe("both",function(){it("should validate if the value is equal to the minimum",function(){expect(A("Foo",3,10)).toBe(true)});it("should validate if the value is equal to the maximum",function(){expect(A("Foo",1,3)).toBe(true)});it("should validate if the value is between minimum/maximum",function(){expect(A("Bar",1,5)).toBe(true)});it("should validate if the min === max and the value === min === max",function(){expect(A("Bar",3,3)).toBe(true)})})});describe("casting",function(){it("should check the length of numeric values",function(){expect(A(123456789,undefined,5)).not.toBe(true);expect(A(123,undefined,5)).toBe(true);expect(A(1,3)).not.toBe(true);expect(A(12345,3)).toBe(true)});it("should check the length of boolean values",function(){expect(A(false,undefined,3)).not.toBe(true);expect(A(false,undefined,5)).toBe(true);expect(A(true,5)).not.toBe(true);expect(A(true,3)).toBe(true)})});describe("messages",function(){it("should accept a custom empty message",function(){B=new Ext.data.validator.Length({emptyMessage:"Foo"});expect(B.validate(undefined)).toBe("Foo")});it("should accept a custom min message",function(){B=new Ext.data.validator.Length({minOnlyMessage:"Foo{0}",min:1});expect(B.validate("")).toBe("Foo1")});it("should accept a custom max message",function(){B=new Ext.data.validator.Length({maxOnlyMessage:"Foo{0}",max:3});expect(B.validate("Value")).toBe("Foo3")});it("should accept a custom both message",function(){B=new Ext.data.validator.Length({bothMessage:"Foo{0}{1}",min:5,max:7});expect(B.validate("Foo")).toBe("Foo57")})});describe("runtime changes",function(){var D=function(E,F){B=new Ext.data.validator.Length({min:E,max:F})};describe("min value",function(){it("should be able to change the min value",function(){D(3);expect(B.validate("A")).not.toBe(true);B.setMin(1);expect(B.validate("A")).toBe(true)});it("should update the minMsg after changing the min value",function(){D(3);expect(B.validate("A")).toBe(C(B.getMinOnlyMessage(),3));B.setMin(2);expect(B.validate("A")).toBe(C(B.getMinOnlyMessage(),2))})});describe("max value",function(){it("should be able to change the max value",function(){D(undefined,3);expect(B.validate("ABCD")).not.toBe(true);B.setMax(10);expect(B.validate("ABCD")).toBe(true)});it("should update the maxMsg after changing the max value",function(){D(undefined,3);expect(B.validate("ABCDE")).toBe(C(B.getMaxOnlyMessage(),3));B.setMax(4);expect(B.validate("ABCDE")).toBe(C(B.getMaxOnlyMessage(),4))})});describe("both",function(){it("should be able to clear the minimum value",function(){D(3,5);expect(B.validate("AB")).not.toBe(true);B.setMin(undefined);expect(B.validate("AB")).toBe(true)});it("should be able to clear the maximum value",function(){D(3,5);expect(B.validate("ABCDEFG")).not.toBe(true);B.setMax(undefined);expect(B.validate("ABCDEFG")).toBe(true)});describe("messages",function(){it("should update the bothMsg when the min value changes",function(){D(3,5);expect(B.validate("ABCDEFG")).toBe(C(B.getBothMessage(),3,5));B.setMin(2);expect(B.validate("ABCDEFG")).toBe(C(B.getBothMessage(),2,5))});it("should update the bothMsg when the max value changes",function(){D(3,5);expect(B.validate("ABCDEFG")).toBe(C(B.getBothMessage(),3,5));B.setMax(6);expect(B.validate("ABCDEFG")).toBe(C(B.getBothMessage(),3,6))});it("should switch to the max msg when clearing the min value",function(){D(3,5);B.setMin(undefined);expect(B.validate("ABCDEFG")).toBe(C(B.getMaxOnlyMessage(),5))});it("should switch to the min msg when clearing the max value",function(){D(3,5);B.setMax(undefined);expect(B.validate("A")).toBe(C(B.getMinOnlyMessage(),3))})})})})});